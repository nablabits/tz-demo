<div class="d-flex flex-column">
  <h3>Cola de producción</h3>

  <!-- Active queue -->
  {% if active %}
    {% for item in active %}
      <div class="border rounded mr-4 my-1 p-2">
        <div class="d-flex justify-content-between">
          <div class="d-flex flex-column justify-content-center">
            <strong>{{item.item.reference.pk}}. {{item.item.reference.ref_name}}</strong>
            <p>{{item.item.element.get_item_type_display}} {{item.item.element.name}} {{item.item.element.item_class}}-{{item.item.element.size}}</p>
          </div>

          <div class="d-flex align-items-center">
            <button class="mr-1 btn btn-sm btn-outline-success" data-toggle="collapse" data-target="#item-details-{{item.pk}}" aria-expanded="false" aria-controls="item-details-{{item.pk}}">
              <i class="far fa-eye pl-1"></i> Ver
            </button>
          </div>
        </div>
        <div class="collapse" id="item-details-{{item.pk}}">
          <div class="d-flex flex-column" >
            <h4 class="ml-1">Detalles de la prenda:</h4>
            <p class="pl-2 mb-0">Cantidad: {{item.item.qty}}</p>
            <p class="pl-2 mb-0">Tiempos: {{item.item.crop}}, {{item.item.sewing}}, {{item.item.iron}}</p>
            {%if item.item.description%}<p class="pl-2 mb-0">Notas: {{item.item.description}}</p>{%endif%}
            <h4 class="mt-2 ml-1">Detalles del pedido:</h4>
            <p class="pl-2 mb-0">Entrega: {{item.item.reference.delivery}}</p>
            <p class="pl-2 mb-0">Prioridad: {{item.item.reference.priority}}</p>
            <p class="pl-2 mb-0">
              Medidas: cintura, {{item.item.reference.waist}}; pecho, {{item.item.reference.chest}};
              cadera, {{item.item.reference.hip}}; largo, {{item.item.reference.lenght}};
            </p>
            {%if item.item.reference.others%}<p class="pl-2 mb-0">Notas: {{item.item.reference.others}}</p>{%endif%}
            <div class="d-flex ml-auto mt-2">
              <button class="mr-2 btn btn-outline-success js-order-add-comment" data-action="order-add-comment" data-pk="{{item.item.reference.pk}}"><i class="fa fa-comment"></i> Comentar</button>
              <button class="mr-1 btn btn-sm btn-outline-success js-queue" data-action="tb-complete" data-pk="{{item.pk}}">
                <i class="far fa-check pl-1"></i> Completar
              </button>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  {% else %}
  <div class="d-flex mt-5 mb-3 justify-content-center">
    <i class="fal fa-{{i_relax}} fa-5x"></i>
  </div>
  <div class="d-flex justify-content-center">
    <h3 class="text-center">Genial!<br>has terminado por hoy!</h3>
  </div>
  {%endif%}

  <!-- Separator -->
  <div class="my-5" style="border-bottom: 1px solid lightgrey;"></div>

  <!-- Completed queue -->
  <h3>Prendas producidas</h3>
  {% if completed %}
    {% for item in completed %}
      <div class="border rounded mr-4 my-1 p-2">
        <div class="d-flex justify-content-between">
          <a href="{% url 'order_view' item.item.reference.pk %}">
            <strong>{{item.item.reference.pk}}. {{item.item.reference.ref_name}}</strong>, &nbsp;
          </a>
          {{item.item.element.get_item_type_display}} {{item.item.element.name}} {{item.item.element.item_class}}-{{item.item.element.size}}
          <div class="d-flex">
            <button class="mr-1 btn btn-sm btn-outline-success js-queue" data-action="tb-uncomplete" data-pk="{{item.pk}}">
              <i class="fal fa-upload"></i>
            </button>
          </div>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div class="justify-content-center text-center mt-4">
      <h1><i class="fal fa-forklift"></i></h1>
      <h3>Oops, parece que no hay nada producido!</h3>
      <p>Habrá que ponerse a trabajar, no?</p>
    </div>
  {%endif%}
</div>
