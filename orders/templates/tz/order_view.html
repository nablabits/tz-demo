{% extends "tz/base.html" %}
{% block orderview %}
<section id="order_view" data-pk="{{ order.pk }}">
  <div class="container pt-4">
    <div class="row mb-4">
      <div class="d-flex-column mr-auto">
        <h3 class="font-weight-bold">Pedido no.{{ order.pk }}</h3>
        <h5 class="mr-auto">Creado el: {{order.inbox_date | date:"j/n/Y"}}</h5>
        <h5 class="mr-auto">Entrega el: {{order.delivery | date:"j/n/Y"}}</h5>
        <h5 class="mr-auto">Prioridad: {{order.get_priority_display}}</h5>
      </div>
      {%if not order.invoiced%}
        <div class="{% if order.status == '8' %}d-none{% else %}d-flex mb-auto{% endif %}">
            <button class="btn btn-outline-success js-order-edit" data-action="order-edit"  data-pk="{{order.pk}}" id="order-edit">
              <i class="fa fa-edit"></i> Editar
            </button>
            <button class="ml-2 btn btn-outline-danger js-order-status" data-status="8" data-pk="{{order.pk}}" id="status-cancel"><i class="fas fa-times"></i> Anular pedido</button>
        </div>
      {%endif%}
    </div>
    {% if order.overdue and order.status not in '78' %}
      <div class="d-flex">
        <div class="alert alert-warning" role="alert">
          <i class="fa fa-warning text-danger mr-2"></i>
          <strong>Atención!</strong>
          La entrega de este pedido se programó para el {{order.delivery | date:"j/n"}}
          <a href="#">
            <button class="ml-2 btn btn-warning js-order-edit-date" data-action="order-edit-date" data-pk="{{order.pk}}"><i class="fa fa-history"></i> Actualizar</button>
          </a>
        </div>
      </div>
    {% endif %}

    <!-- Header -->
    <div class="d-flex mt-4 order_header">
      <h4 class="mr-auto">
          <strong>Cliente: </strong>
          <a href="{% url 'customer_view' pk=order.customer.pk %}">{{order.customer}}</a>
      </h4>
      <h4><strong>Referencia:</strong> {{order.ref_name}}</h4>
    </div>

    <!-- Status element-->
    <div id="order-status">
    {% include 'includes/order_status.html' %}
    </div>

    <!-- Order Details element-->
    <div id="order-details">
    {% include 'includes/order_details.html' %}
    </div>

    <!-- Order Comments element-->
    <div id="comment-list">
    {% include 'includes/comment_list.html' %}
    </div>


  </div>
</section>
{% endblock %}
